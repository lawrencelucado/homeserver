// Prisma Schema for Perez Fashion
// Database: SQLite (self-hosted on home server)

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// Gallery Items - Before/After photos
model GalleryItem {
  id              Int      @id @default(autoincrement())
  title           String
  description     String?
  beforeImagePath String   // Path: /uploads/gallery/before/filename.jpg
  afterImagePath  String   // Path: /uploads/gallery/after/filename.jpg
  category        String   @default("general")
  isVisible       Boolean  @default(true)
  displayOrder    Int      @default(0)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([isVisible, displayOrder])
  @@map("gallery_items")
}

// Blog Posts
model BlogPost {
  id                Int       @id @default(autoincrement())
  title             String
  slug              String    @unique
  content           String    // Rich text HTML content
  excerpt           String?   // Short description for previews
  featuredImagePath String?   // Path: /uploads/blog/featured/filename.jpg
  category          String    @default("general")
  tags              String?   // JSON array string: '["tip","wedding"]'
  status            String    @default("draft") // 'draft' or 'published'
  publishedAt       DateTime?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt

  @@index([status, publishedAt])
  @@map("blog_posts")
}

// Admin Users
model AdminUser {
  id           Int      @id @default(autoincrement())
  email        String   @unique
  passwordHash String
  name         String?
  role         String   @default("admin")
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("admin_users")
}
